\chapter{Actionable semigroups}

Each definition contining the word ``semicategory'' will also implicity create a similar definition for semigroups.

\section{Category of ordered semicategory actions}

\begin{defn}
The category~$\mathbf{SemiCat}$ of semicategories is small semicategories with semifunctors as morphisms.
\end{defn}

\begin{defn}
The category~$\mathbf{OrdSemiCat}$ of ordered semicategories is ordered semicategories with monotone semifunctors as morphisms.
\end{defn}

\begin{defn}
The category~$\mathbf{SemiOrdSemiCatAct}$ of semi-ordered semicategory actions is small semi-ordered semicategories with semifunctors between them as morphisms.
\end{defn}

That is, morphisms~$F$ are semifunctors defined by the following properties:

\begin{enumerate}
\item $F:a\to b$;
\item $b\circ F = a$.
\end{enumerate}

In more detail: $a:\mathcal{C}\to\mathbf{Pos}$ and $b:\mathcal{D}\to\mathbf{Pos}$, the morphisms are $(a,b,f)$
where $f:\mathcal{C}\to\mathcal{D}$ and $b\circ f=a$ and
\[ x\sqsubseteq y\Rightarrow \supfun{a}x\sqsubseteq\supfun{a}y\land\supfun{b}x\sqsubseteq\supfun{b}y. \]

\begin{defn}
The category~$\mathbf{OrdSemiCatAct}$ of ordered semicategory actions is the wide subcategory of~$\mathbf{SemiOrdSemiCatAct}$
consisting of semifunctors~$(a,b,f)$ such that $a\sqsubseteq b\Rightarrow\supfun{a}x\sqsubseteq \supfun{b}x$ for all $a,b\in\Hom(x,y)$, $x,y\in\Ob\mathcal{C}$.
\end{defn}

\section{Restricted identity transformations}

Fix an ordered semicategory action.

\emph{Semicategory action with identities} is an ordered semicategory~$S$ action~$\supfun{}$ together with a function $p\mapsto\id_p\in\End(A)$ for $p\in A$ for $A\in\Ob S$ such that whenever these equalities are defined:
\begin{enumerate}
\item $\supfun{\id_p}x=x\sqcap p$;
\item $\id_p\circ f\sqsubseteq f$;\fxwarning{This and the next axioms are probably not needed.}
\item $f\circ\id_p\sqsubseteq f$.
\end{enumerate}

\begin{obvious}
For every ordered semicategory action with identities, the identity transformations are entirely defined on their domains.
\end{obvious}

\begin{prop}
\label{prop:id-inj}
$x\mapsto\id_x$ is an injection.
\end{prop}

\begin{proof}
Let $x\ne y$. Then $x\ne x\sqcap y$ (possibly, $x\sqcap y$ is undefined).
\[ \supfun{\id_y}x=x\sqcap y\ne x=x\sqcap x=\supfun{\id_x}x. \]
\end{proof}

\begin{defn}
Another axiom (that we don't need now) is $\id_p\circ\id_q=\id_{p\sqcap q}$.
\end{defn}

\emph{Restriction} of an interspace~$a$ to element~$x$ is $a|_x=a\circ\id_x$.

\emph{Square restriction} (a generalization of restriction of a topological space, metric space, etc.) of a space~$a$ to element~$x$ is $\id_x\circ a\circ\id_x$.

\section{Actionable semigroups}

\begin{defn}
An \emph{actionable semicategory} is an semicategory, and $\cdot$ is a binary operation on $A$ such that $(g\circ f)\cdot x = g\cdot(f\cdot x)$.
\end{defn}

\begin{defn}
An \emph{ordered actionable semicategory} is an actionable semicategory which is also an ordered semicategory with additional equation:
\begin{enumerate}
\item $f_0\sqsubseteq f_0\land g_1\sqsubseteq g_0 \Rightarrow g_0\cdot f_0\sqsubseteq g_1\cdot f_1$.
\end{enumerate}
\end{defn}

\begin{defn}
An \emph{actionable semicategory with identities} is an actionable semicategory that is also a semicategory with identities.
\end{defn}

\begin{rem}
An actionable semigroup is an universal algebra.
\end{rem}

\begin{rem}
Actionable ordered semigroups and actionable semigroups with identities are relational algebras.
\end{rem}

\begin{rem}
It is even an universal algebra signature\footnote{See here for \href{https://chatgpt.com/s/t_691e8f88da64819184591f9e310e1728}{properties of categories isomorphic to universal algebras}.} in the case of up or down semilattice.
\end{rem}

Let write the full universal algebra signature for actionable semigroup with identities ?? down-se\-mi\-lat\-ti\-ce:

\fxwarning{Move the axioms below.}
\begin{enumerate}
\item $h\circ(g\circ f) = (h\circ g)\circ f$ (semigroup);
\item $h\cdot(g\cdot f) = (h\circ g)\cdot f$ (actionable);
\item $a\sqcap(b\sqcap c) = (a\sqcap b)\sqcap c$ (semilattice);
\item $a\sqcap b = b\sqcap a$ (ditto);
\item $a\sqcap a = a$ (ditto);
\item $(g_0\sqcap g_1)\circ(f_0\sqcap f_1) = ((g_0\sqcap g_1)\circ(f_0\sqcap f_1)) \sqcap (g_0\circ f_0)$ (ordered semigroup);
\item $(g_0\sqcap g_1)\cdot(f_0\sqcap f_1) = ((g_0\sqcap g_1)\cdot(f_0\sqcap f_1)) \sqcap (g_0\cdot f_0)$ (ditto);
\item\label{ax:ids} $\id_p\cdot x=x\sqcap p$ (identities);\fxwarning{It may be non-true for arbitrary morphism~$x$.}
  \fxnote{This axiom allows to remove the operation~$\sqcap$ from the signature.}
\item $(\id_p\circ f)\sqcap f=f$ (ditto);\fxwarning{This and the next axioms are probably not needed.}
\item $(f\circ\id_p)\sqcap f=f$ (ditto).
\item \fxwarning{Check that this is all the axioms.}
\end{enumerate}

For up-se\-mi\-lat\-ti\-ce, we need more axions because it requires both $\sqcup$ and $\sqcap$ (for axiom~\ref{ax:ids}).

\section{From actionable semicategory to semicategory action}

\begin{defn}
If $(\dots,\circ,\cdot)$ is an actionable semicategory, then we can define the operation $\supfun{}$ by $\supfun{f}x = f\cdot x$.
\end{defn}

\begin{obvious}
The above defines an semicategory action with identities with operations~$\circ$ and~$\supfun{}$.
\end{obvious}

\begin{rem}
Semicategory actions defined this way have the sets of objects and morphisms equal to each other.
\end{rem}

\section{From semicategory action with identities to actionable semicategory}

Let $(A,\circ,\supfun{})$ be an ordered semicategory action with identities, each object set having greatest element~$\top$.

\begin{obvious}
$\supfun{f}x = \supfun{f}\supfun{\id_x}\top = \supfun{f\circ\id_x}\top = \im(f\circ\id_x)$.
\end{obvious}

By analogy with the above obvious, we can define $g\cdot f = \id_{\im(g\circ f)}$.

\begin{prop}
The above with the same semigroup operation~$\circ$ defines an actionable semicategory.
\end{prop}

\begin{proof}
Really, $(g\circ f)\cdot x = \id_{\im(g\circ f\circ x)} = \id_{\supfun{g}\supfun{f}\supfun{x}\top} = \id_{\supfun{g}{\im(f\circ x)}} = \id_{\supfun{g}(\top\sqcap\im(f\circ x))} = \id_{\im(g\circ(y\mapsto y\sqcap\im(f\circ x))} = \id_{\im(g\circ\id_{\im(f\circ x)})} = g\cdot(f\cdot x)$.

Monotonicity is obvious.
\end{proof}

\begin{rem}
Identities can't be the same, because the set of objects is not the same.
\end{rem}

\fxwarning{The below theorem should be moved in the text.}

\begin{thm}
If we restrict the~$\cdot$ operation to the set that $\setcond{\id_x}{x\in A,A\in\Ob}$, then we recover the original semicategory action \fxnote{with identities?} up to isomorphism of ??.
\end{thm}

\begin{proof}
??
\end{proof}

\section{An injection}

Then \[ g\cdot\id_x = \supfun{g}\id_x = \id_{\im(g\circ\id_x)} = \id_{\supfun{g}x}. \]

So, we extended the mapping $\supfun{g}$ to a wider set, because $x\mapsto\id_x$ is an injection (see proposition~\ref{prop:id-inj}).

We can also restrict it to restricted identities: $\supfun{f}\id_x = f\cdot\id_x$ and obtain this way an ordered semicategory action isomorphic to the original one.

\fxnote{Is it a natural isomorphism?}

\section{Compositions of our ``inducing'' operations}

Every semicategory action with identities, whose objects have greatest elements, induces an actionable semicategory with identities, which induces another semicategory action with identities. Thus every semigroup with identities, whose objects have greatest elements, induces another semigroup with identities. The formula for this is $\supfun{g}'f = \id_{\im(g\circ f)}$, where $\supfun{}'$ is the induced action.

Let apply this formula two times:
\[ \supfun{g}''f = \id_{\im'(g\circ f)} = \id_{\supfun{g\circ f}'\top} = \id_{\im(g\circ f\circ\top)} = \id_{\im(g\circ f)} = \supfun{g}'f. \]
